<html>
<head></head>
<body>
<script type="text/javascript">
    var sock = null;
    var wsuri = "ws://127.0.0.1:6244";

    window.onload = function () {

        console.log("onload");

        sock = new WebSocket(wsuri);

        /*onopen 建立连接后触发*/
        sock.onopen = function () {
            console.log("链接到： " + wsuri);
        }

        /*onclose 关闭连接时触发*/
        sock.onclose = function (e) {
            console.log("链接已关闭 (" + e.code + ")");
        }

        /*onmessage 收到消息后触发*/
        sock.onmessage = function (e) {
            console.log("收到消息: " + e.data);
        }
    };

    function send() {
        var msg = document.getElementById('message').value;
        sock.send(msg);
    };
</script>
<h1>WebSocket Echo Test</h1>
<form>
    <p>
        消息: <input id="message" type="text" value="Hello, world!">
    </p>
</form>
<button onclick="send();">发送消息</button>
</body>
</html>